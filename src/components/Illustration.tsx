"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";
// import styles from "./illustration.module.scss";

const Illustration: React.FC = () => {
  const pathRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    if (!pathRef.current) return;

    const paths = pathRef.current.querySelectorAll("path"); // すべてのパスを取得
    paths.forEach((path) => {
      const length = (path as SVGPathElement).getTotalLength();
      gsap.set(path, { strokeDasharray: length, strokeDashoffset: length });
    });

    // 順番に描画するアニメーション
    const tl = gsap.timeline();
    paths.forEach((path, index) => {
      tl.to(path, { strokeDashoffset: 0, duration: 2, ease: "power2.out" }, index * 1); // 1.5秒ごとに開始
    });
  }, []);

  return (
    <svg
      ref={pathRef}
      id="illustration"
      data-name="illustration"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 841.5 474">
      <g>
        <path
          className="hero-line-1 cls-1"
          d="M381.1,174.07c-49.37-20.98-118.48-6.17-166-6.54s-38.88-13.2-22.83-16.91c0,0,17.28-6.17,30.86,9.87,13.58,16.04,27.15,9.87,27.15,9.87,6.17,0,11.11-8.64,11.11-8.64,6.17,0,12.34,0,17.28-2.47,4.94-2.47,0-7.41-2.47-8.64-2.47-1.23-13.58-1.23-13.58-3.7s17.28-17.28,29.62-16.04c12.34,1.23,25.92,7.41,38.26,14.81,12.34,7.41,22.22,0,24.68-1.23,2.47-1.23,0-12.34,0-17.28s2.47-3.7,3.7-16.04c1.23-12.34-7.41-25.92-3.7-32.09,3.7-6.17,15.23-17.9,15.23-17.9-.82-5.55-36.21,3.09-47.32,5.55-11.11,2.47-30.86-11.11-45.67-13.58-14.81-2.47-70.35-24.68-70.35-24.68-86.24-5.25-84.54,16.31-121.53,0C48.55,12.13.5.5.5.5"
        />
        <path
          className="hero-line-2 cls-1"
          d="M355.18,260.46c-6.05-1.21-2.47-32.09-2.39-36.76s1.16-16.31,9.96-16.31,7.66,15.39,7.66,15.39c2.88,7.98,4.52.66,8.22,1.89,3.7,1.23,3.7-13.58,1.23-14.81-9.1-4.55-3.7-17.28-3.7-17.28,14.81-81.46,81.46-91.33,112.31-85.16,0,0,72.82-13.58,114.78,33.32,41.96,46.9,46.9,155.51,66.65,185.13,19.75,29.62,35.79,72.82,12.34,95.03-23.45,22.22-18.84-23.21,2.47-81.46,18.51-50.6-29.62,70.35-98.74,102.44-26.23,12.18-69.12,14.81-16.04-40.73,53.07-55.54-104.52-20.15-72.82-9.87,133.29,43.2,75.94-24.38,213.52,54.31,48.05,27.48,130.37,4.41,130.37,4.41"
        />
        <path
          className="hero-line-2 cls-1"
          d="M372.46,223.44l3.02.27c1.79-9.61,6.85-12.61,6.85-12.61,2.47-3.7,3.7-22.22,3.7-22.22,0,0,3.7,18.51,11.11,18.51s10.59.86,17.28-25.92c7.41-29.62-7.34,12-8.64,18.51-1.23,6.17,0,9.87,2.47,11.11,17.12,8.56,76.54-62.6,65.41-61.71s-29.62,53.07-29.62,71.58,5.23,59.95,45.49,87.3c15.87,10.78,44.6,74.38,6.85,115.48-37.75,41.1-57.28-2.84-75.57,5.1-18.29,7.94-18.74,17.98-8.87,11.81,120.81-75.51,85.16-181.43,55.54-193.77l-71.58-13.58c-2.47,24.68-4.94,39.49-16.04,41.96-11.11,2.47-5.76-48.75-5.76-48.75,0,0-.41.62.83-5.55,2.07-10.33,3.7,11.11-4.94,22.22,0,0-11.11,12.34-14.81,19.75-3.7,7.41,15.92,22.89,20.3,21.93,4.38-.95.5-2.9-5.49-5.89-4.94-2.47-9.2,8.86-13.99,15.03-7,9,21,18,28,22,2.04,1.17-7-3-14-10-3.85-3.85-8.47-5.28-9.88-4.81-3.7,1.23-8.12,11.81-4.94,16.04,4.75,6.32.82,9.76,0,15.28-.68,4.59-8.35,13.51,3.94,19.22,32.88,15.27,98.5,2.53,70.12,11.17-28.39,8.64-54.31-14.81-48.13-3.7,0,0,37.03,16.04,44.43,25.92,5.68,7.58,33.32,38.26,25.92,51.84-3.96,7.27-20.35,36.55-20.35,36.55"
        />
        <path className="cls-1" d="M319.39,83.97s4.12-12.34,29.62-12.34c4.94,0-6.13,11.26-4.94,16.04" />
      </g>
    </svg>
  );
};

export default Illustration;
